code BUOI 10
CREATE PROC DIEM_INFO
@MSSV CHAR (7),
@MSMH CHAR (9),
@SOLAN INT OUT,
@DIEMMAX DECIMAL(5,2) OUT,
@DIEMTB DECIMAL(5,2) OUT
AS
SELECT @SOLAN = COUNT(*), @DIEMMAX = MAX(DIEM), @DIEMTB = AVG(DIEM)
FROM HOC H JOIN LOP L ON H.malop = L.malop
WHERE MSSV = @MSSV AND MSMH = @MSMH

SELECT *
FROM HOC H
WHERE MSSV = '22301500'


DECLARE @SL INT
DECLARE @DMAX DECIMAL(5,2)
DECLARE @DTB DECIMAL(5,2)

EXEC DIEM_INFO '22301500','IT201DV01',@SL OUT,@DMAX OUT,@DTB OUT

PRINT @sl
PRINT @DMAX
PRINT @DTB


select * from lop
select * from hoc





CREATE PROC THEMLOP.DKHOCLAI
@MSMH CHAR(9),
@HOCKY CHAR(5),
@GV NVARCHAR(50)
AS
DECLARE @TTMAX TINYINT

SELECT@TTMAX = MAX(CONVERT(TINYINT,RIGHT(MALOP,2)) +1)
FROM LOP
WHERE MSMH = @MSMH

selct MALOP
from lop
where msmh = 'it2DV201


IF @TTMAX < 9
SET @MALOP = MSMH + '_0'+ CONVERT(CHAR(1),@STTMAX)
ELSE
SET @MALOP = @MSMH + '_'+ CONVERT(CHAR(2),@TTMAX)

select 


